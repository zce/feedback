<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{item.class_name}}-{{item.datetime}} 反馈报告</title>
  <style type="text/css">
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1em;
      margin-bottom: 16px;
      font-weight: bold;
      line-height: 1.4;
    }

    h1 {
      padding-bottom: 0.3em;
      font-size: 2.25em;
      line-height: 1.2;
      border-bottom: 1px solid #eee;
    }

    h2 {
      padding-bottom: 0.3em;
      font-size: 1.75em;
      line-height: 1.225;
      border-bottom: 1px solid #eee;
    }

    h3 {
      font-size: 1.5em;
      line-height: 1.43;
    }

    h4 {
      font-size: 1.25em;
    }

    h5 {
      font-size: 1em;
    }

    h6 {
      font-size: 1em;
      color: #777;
    }

    p {
      margin-top: 0;
      margin-bottom: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    thead {
      background-color: #f5f5f5;
    }
    thead th, thead td {
      padding: 15px;
    }
    th {
      font-weight: 500;
    }
    th, td {
      border: 1px solid #e1e1e1;
      padding: 5px;
    }
  </style>
</head>
<body>
  <h1>{{item.class_name}}-{{item.datetime}} 反馈报告</h1>
  <br>
  <h2>今日吸收率：<strong{{#if(absorptivity>=85)}} style="color:rgba(92, 184, 92, 0.7)"{{elseif(absorptivity>=70)}} style="color:rgba(91, 192, 222, 0.7)"{{elseif(absorptivity>=60)}} style="color:rgba(240, 173, 78, 0.7)"{{else}} style="color:#f40"{{/if}}>{{absorptivity.toFixed(2)}}%</strong></h2>
  <br><br>
  <h2>学习目标吸收情况统计</h2>
  <table>
    <thead>
      <tr>
        <th>学习目标</th>
        {{#each(answer_options)~}}
        <th>{{this.full}}</th>
        {{~/each}}
      </tr>
    </thead>
    <tbody>
      <tr style="background-color: rgba(0, 255, 20, 0.1)">
        <td>综合结果：</td>
        {{#each(answer_options)~}}
        {{ set (tmp = percent[xindex].total / percent[xindex].count) }}
        <th{{#if(tmp>=75)}} style="background-color:rgba(92, 184, 92, 0.7);color:#fff"{{elseif(tmp>=50)}} style="background-color:rgba(91, 192, 222, 0.7);color:#fff"{{elseif(tmp>=25)}} style="background-color:rgba(240, 173, 78, 0.7);color:#fff"{{/if}}>{{tmp.toFixed(2)}}%</th>
        {{~/each}}
      </tr>
      {{#each(item.targets)~}}
      <tr>
        <td{{#if(this.highlight)}} style="color:#f70"{{/if}}>{{this.question}}</td>
        {{#each(answer_options)~}}
        <th{{#if(percent[xindex][../xindex]>=75)}} style="background-color:rgba(92, 184, 92, 0.7);color:#fff"{{elseif(percent[xindex][../xindex]>=50)}} style="background-color:rgba(91, 192, 222, 0.7);color:#fff"{{elseif(percent[xindex][../xindex]>=25)}} style="background-color:rgba(240, 173, 78, 0.7);color:#fff"{{/if}}>{{percent[xindex][../xindex]}}%</th>
        {{~/each}}
      </tr>
      {{~/each}}
    </tbody>
  </table>
  <br><br>
  <h2>学员意见与建议</h2>
  <table>
    <thead>
      <tr>
        <th>姓名</th>
        <th>意见与建议</th>
      </tr>
    </thead>
    <tbody>
      {{#each(item.receives, 'item', 'ip')~}}
      <tr>
        <td title="{{ip}}">{{item.name}}</td>
        <td>{{item.note}}</td>
      </tr>
      {{~/each}}
    </tbody>
  </table>
  <br><br>
  <h2>原始统计数据</h2>
  <table>
    <thead>
      <tr>
        <th>姓名</th>
        {{#each(item.targets)~}}
        <th title="{{this.question}}">{{this.question}}</th>
        {{~/each}}
      </tr>
    </thead>
    <tbody>
      {{#each(item.receives, 'item', 'ip')~}}
      <tr>
        <td title="{{ip}}">{{item.name}}</td>
        {{#each(item.marks)~}}
        <td{{#if(answer_options[this].short==='D')}} style="background-color:#f00;color:#fff"{{elseif(answer_options[this].short==='C')}} style="background-color:#f70;color:#fff"{{elseif(answer_options[this].short==='B')}} style="background-color:#ff0;color:#222"{{/if}}>{{answer_options[this].short}}</td>
        {{~/each}}
      </tr>
      {{~/each}}
    </tbody>
  </table>
  <br><br><br><br>
</body>
</html>
